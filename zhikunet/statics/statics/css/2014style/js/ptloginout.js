var pt_logout={ret:0,appDomain:"",mainDomain:"",httpWhiteDomain:{"qq.com":1,"soso.com":1,"paipai.com":1,"tenpay.com":1,"taotao.com":1,"tencent.com":1,"oa.com":1,"webdev.com":1,"3366.com":1,"imqq.com":1,"pengyou.com":1,"qplus.com":1,"qzone.com":1,"server.com":1,"myapp.com":1,"kuyoo.cn":1,"weiyun.com":1,"wechatapp.com":1,"51buy.com":1,"yixun.com":1,"qcloud.com":1,"wechat.com":1,"weishi.com":1},getCookie:function(B){var A=document.cookie.match(new RegExp("(^| )"+B+"=([^;]*)(;|$)"));return !A?"":decodeURIComponent(A[2])},delCookie:function(A,B,C){document.cookie=A+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path="+(C?C:"/")+"; "+(B?("domain="+B+";"):"")},jsonp:function(B){var A=document.createElement("script");A.setAttribute("src",B);document.getElementsByTagName("head")[0].appendChild(A);A.onerror=function(){A.onerror=null;pt_logout.set_ret(0,"")}},nlog:function(H,D,G){if(Math.random()<=(G||1)){var A="http://badjs.qq.com/cgi-bin/js_report?";if(location.protocol=="https:"){A="https://ssl.qq.com//badjs/cgi-bin/js_report?"}var E=location.href;var F=encodeURIComponent(H+"|_|"+E+"|_|"+window.navigator.userAgent);var C=A+"bid=110&level=2&mid="+D+"&msg="+F+"&v="+Math.random();var B=new Image();B.src=C}},init:function(){var A=location.hostname.match(/\w*\.(com|cn)$/);pt_logout.mainDomain=A?A[0]:"";if(!pt_logout.httpWhiteDomain[pt_logout.mainDomain]){pt_logout.nlog("公司外部域名引用logout","350448")}var B=location.hostname.match(/\w+(\.\w+){2}$/);pt_logout.appDomain=B?B[0]:"";if(pt_logout.mainDomain!="qq.com"){pt_logout.appDomain=pt_logout.mainDomain}pt_logout.nlog("logout pv","365716",0.05)},getLogoutUrl:function(){var F=pt_logout.getCookie("pt4_token");var A=pt_logout.getCookie("skey");var C=pt_logout.time33(A);var B=pt_logout.getCookie("ptcz");var E=pt_logout.hash33(B);var D="";D=((location.protocol=="https:")?"https://ssl.":"http://")+"ptlogin2."+pt_logout.mainDomain+"/logout?";D+=("pt4_token="+F+"&pt4_hkey="+C+"&pt4_ptcz="+E+"&deep_logout=1");return D},time33:function(D){var C=0;for(var A=0,B=D.length;A<B;A++){C=C*33+D.charCodeAt(A)}return C%4294967296},hash33:function(D){var C=0;for(var A=0,B=D.length;A<B;++A){C+=(C<<5)+D.charCodeAt(A)}return C&2147483647},clearCookie:function(A){A=A||pt_logout.appDomain;pt_logout.delCookie("p_uin",A);pt_logout.delCookie("p_skey",A);pt_logout.delCookie("p_luin",A);pt_logout.delCookie("p_lskey",A);pt_logout.delCookie("pt4_token",A);pt_logout.delCookie("pt_mbkey",pt_logout.mainDomain||"qq.com");if(pt_logout.appDomain!=""&&pt_logout.getCookie("skey_m")!=""){pt_logout.delCookie("uin_m",pt_logout.appDomain);pt_logout.delCookie("skey_m",pt_logout.appDomain)}},set_ret:function(D,B){try{var A=pt_logout.getCookie("pt4_token");pt_logout.clearCookie(B);if(D>0){}else{pt_logout.delCookie("uin",pt_logout.mainDomain);pt_logout.delCookie("skey",pt_logout.mainDomain);pt_logout.nlog("logout fail","285851",0.1)}if(typeof pt_logout.callback=="function"){pt_logout.callback(2)}if(B!=""&&B!=pt_logout.appDomain){pt_logout.nlog("domain unsame:n="+D+":pt4_token="+A+":cgi_domain="+B+":js_domain="+pt_logout.appDomain,"285852",0.1)}}catch(C){return }},logout:function(E){pt_logout.init();var D=pt_logout.getCookie("pt4_token");var A=pt_logout.getCookie("skey");var B=pt_logout.getCookie("ptcz");if(typeof E=="function"){pt_logout.callback=E}var C=pt_logout.getLogoutUrl();if(!D&&!A&&!B){if(typeof E=="function"){E(2)}pt_logout.nlog("logout without cookie",365715)}else{pt_logout.jsonp(C)}}};